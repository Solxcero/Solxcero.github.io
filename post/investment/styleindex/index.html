<!doctype html>



































<html
  class="not-ready lg:text-base"
  style="--bg: #fff"
  lang="en-us"
>
<head>
  
  <link rel="stylesheet" href="/css/custom.css">
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
          delimiters: [
              {left: '$$', right: '$$', display: true}, 
              {left: '$', right: '$', display: false},  
              {left: '\\(', right: '\\)', display: false} 
          ],
          throwOnError: false,
          ignoreTags: ["script", "noscript", "style", "textarea", "pre", "code"] 
        });
    });
</script>

    


</head>

  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, shrink-to-fit=no"
  />

  
  <link href="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/css/lightbox.min.css" rel="stylesheet" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lightbox2/2.11.3/js/lightbox-plus-jquery.min.js"></script>
  
  <title>Style 배분 전략 - 漸入佳境</title>

  
  <meta name="theme-color" />

  
  
  
  
  <meta name="description" content="S&amp;P U.S. Style Indices Methodology 예전에 &lsquo;포트폴리오 구축&rsquo;을 주제로 팀프로젝트를 한 적이 있는데, 그 때 S&amp;P U.S. Style Indices Methodology 문서를 참고하여 파이썬으로 가치/성장 스타일 투자를 구현한 경험이 있다.
이 방법론의 핵심은
모든 종목에는 가치주의 성격과 성장주의 성격이 혼합되어 있고, 둘 중 어느 쪽에 더 치우쳐져있는지를 가치점수(Value Score) 와 성장점수(Growth Score)판단하겠다는 아이디어
라고 보면 된다.
성장이 뭐죠? 가치는요? 성장주의 핵심은 미래의 성장 가능성을 높게 평가하고, 주가 상승을 통해 수익을 실현하는 것" />
  <meta name="author" content="덕후의 즐거운 인생" />
  

  
  
  
  
  
  
  <link rel="preload stylesheet" as="style" href="/main.min.css" />

  
  
  
  
  
  <link rel="preload" as="image" href="/theme.png" />

  
  
  
  
  <link rel="preload" as="image" href="https://github.com/Solxcero/Solxcero.github.io/assets/99321739/4ccb5f75-725b-4360-b1d6-6b1c99072d56" />
  
  

  
  
  <link rel="preload" as="image" href="/github.svg" />
  
  

  
  
  <script
    defer
    src="/highlight.min.js"
    onload="hljs.initHighlightingOnLoad();"
  ></script>
  

  
  
  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
          delimiters: [
              {left: '$$', right: '$$', display: true}, 
              {left: '$', right: '$', display: false},  
              {left: '\\(', right: '\\)', display: false} 
          ],
          throwOnError: false,
          ignoreTags: ["script", "noscript", "style", "textarea", "pre", "code"] 
        });
    });
</script>

  
  
  

  
  <link rel="icon" href="/favicon.ico" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />

  
  <meta name="generator" content="Hugo 0.124.0">

  
  
  
  
  
  <meta itemprop="name" content="Style 배분 전략">
<meta itemprop="description" content="S&amp;P U.S. Style Indices Methodology 예전에 &lsquo;포트폴리오 구축&rsquo;을 주제로 팀프로젝트를 한 적이 있는데, 그 때 S&amp;P U.S. Style Indices Methodology 문서를 참고하여 파이썬으로 가치/성장 스타일 투자를 구현한 경험이 있다.
이 방법론의 핵심은
모든 종목에는 가치주의 성격과 성장주의 성격이 혼합되어 있고, 둘 중 어느 쪽에 더 치우쳐져있는지를 가치점수(Value Score) 와 성장점수(Growth Score)판단하겠다는 아이디어
라고 보면 된다.
성장이 뭐죠? 가치는요? 성장주의 핵심은 미래의 성장 가능성을 높게 평가하고, 주가 상승을 통해 수익을 실현하는 것"><meta itemprop="datePublished" content="2024-07-13T09:21:19+09:00" />
<meta itemprop="dateModified" content="2024-07-13T09:21:19+09:00" />
<meta itemprop="wordCount" content="1408">
<meta itemprop="keywords" content="" />
  
  <meta property="og:title" content="Style 배분 전략" />
<meta property="og:description" content="S&amp;P U.S. Style Indices Methodology 예전에 &lsquo;포트폴리오 구축&rsquo;을 주제로 팀프로젝트를 한 적이 있는데, 그 때 S&amp;P U.S. Style Indices Methodology 문서를 참고하여 파이썬으로 가치/성장 스타일 투자를 구현한 경험이 있다.
이 방법론의 핵심은
모든 종목에는 가치주의 성격과 성장주의 성격이 혼합되어 있고, 둘 중 어느 쪽에 더 치우쳐져있는지를 가치점수(Value Score) 와 성장점수(Growth Score)판단하겠다는 아이디어
라고 보면 된다.
성장이 뭐죠? 가치는요? 성장주의 핵심은 미래의 성장 가능성을 높게 평가하고, 주가 상승을 통해 수익을 실현하는 것" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/investment/styleindex/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2024-07-13T09:21:19+09:00" />
<meta property="article:modified_time" content="2024-07-13T09:21:19+09:00" />

  
  <meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Style 배분 전략"/>
<meta name="twitter:description" content="S&amp;P U.S. Style Indices Methodology 예전에 &lsquo;포트폴리오 구축&rsquo;을 주제로 팀프로젝트를 한 적이 있는데, 그 때 S&amp;P U.S. Style Indices Methodology 문서를 참고하여 파이썬으로 가치/성장 스타일 투자를 구현한 경험이 있다.
이 방법론의 핵심은
모든 종목에는 가치주의 성격과 성장주의 성격이 혼합되어 있고, 둘 중 어느 쪽에 더 치우쳐져있는지를 가치점수(Value Score) 와 성장점수(Growth Score)판단하겠다는 아이디어
라고 보면 된다.
성장이 뭐죠? 가치는요? 성장주의 핵심은 미래의 성장 가능성을 높게 평가하고, 주가 상승을 통해 수익을 실현하는 것"/>

  
  
  
  <link rel="canonical" href="/post/investment/styleindex/" />
  
  
  <link rel="stylesheet" href="/css/highlight.css">
  <link rel="stylesheet" href="/css/custom.css">
</head>

  <body class="text-black duration-200 ease-out dark:text-white">
    <header class="mx-auto flex h-[4.5rem] max-w-3xl px-8 lg:justify-center">
  <div class="relative z-50 mr-auto flex items-center">
    <a
      class="-translate-x-[1px] -translate-y-[1px] text-2xl font-semibold"
      href="/"
      >漸入佳境</a
    >
    <div
      class="btn-dark text-[0] ml-4 h-6 w-6 shrink-0 cursor-pointer [background:url(./theme.png)_left_center/_auto_theme('spacing.6')_no-repeat] [transition:_background-position_0.4s_steps(5)] dark:[background-position:right]"
      role="button"
      aria-label="Dark"
    ></div>
  </div>

  <div
    class="btn-menu relative z-50 -mr-8 flex h-[4.5rem] w-[5rem] shrink-0 cursor-pointer flex-col items-center justify-center gap-2.5 lg:hidden"
    role="button"
    aria-label="Menu"
  ></div>

  

  <script>
    
    const htmlClass = document.documentElement.classList;
    setTimeout(() => {
      htmlClass.remove('not-ready');
    }, 10);

    
    const btnMenu = document.querySelector('.btn-menu');
    btnMenu.addEventListener('click', () => {
      htmlClass.toggle('open');
    });

    
    const metaTheme = document.querySelector('meta[name="theme-color"]');
    const lightBg = '#fff'.replace(/"/g, '');
    const setDark = (isDark) => {
      metaTheme.setAttribute('content', isDark ? '#000' : lightBg);
      htmlClass[isDark ? 'add' : 'remove']('dark');
      localStorage.setItem('dark', isDark);
    };

    
    const darkScheme = window.matchMedia('(prefers-color-scheme: dark)');
    if (htmlClass.contains('dark')) {
      setDark(true);
    } else {
      const darkVal = localStorage.getItem('dark');
      setDark(darkVal ? darkVal === 'true' : darkScheme.matches);
    }

    
    darkScheme.addEventListener('change', (event) => {
      setDark(event.matches);
    });

    
    const btnDark = document.querySelector('.btn-dark');
    btnDark.addEventListener('click', () => {
      setDark(localStorage.getItem('dark') !== 'true');
    });
  </script>

  <div
    class="nav-wrapper fixed inset-x-0 top-full z-40 flex h-full select-none flex-col justify-center pb-16 duration-200 dark:bg-black lg:static lg:h-auto lg:flex-row lg:!bg-transparent lg:pb-0 lg:transition-none"
  >
    
    
    <nav class="lg:ml-12 lg:flex lg:flex-row lg:items-center lg:space-x-6">
      
      <a
        class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal"
        href="/categories/"
        >Categories</a
      >
      
      <a
        class="block text-center text-2xl leading-[5rem] lg:text-base lg:font-normal"
        href="/projects/"
        >Projects</a
      >
      
    </nav>
    

    
    <nav
      class="mt-12 flex justify-center space-x-10 dark:invert lg:ml-12 lg:mt-0 lg:items-center lg:space-x-6"
    >
      
      <a
        class="h-8 w-8 text-[0] [background:var(--url)_center_center/cover_no-repeat] lg:h-6 lg:w-6"
        style="--url: url(./github.svg)"
        href="https://github.com/Solxcero"
        target="_blank"
        rel="me"
      >
        github
      </a>
      
    </nav>
    
  </div>
</header>


    <main
      class="prose prose-neutral relative mx-auto min-h-[calc(100%-9rem)] max-w-3xl px-7 pb-16 pt-12 dark:prose-invert"
    >
      
<link rel="stylesheet" href="/assets/css/custom.css">
<div class="content-wrapper">
  <aside class="toc" id="toc">
    
    <nav id="TableOfContents">
  <ul>
    <li><a href="#sp-us-style-indices-methodology">S&amp;P U.S. Style Indices Methodology</a></li>
    <li><a href="#성장이-뭐죠-가치는요">성장이 뭐죠? 가치는요?</a>
      <ul>
        <li><a href="#growth-factors">Growth Factors</a></li>
        <li><a href="#value-factors">Value Factors</a></li>
        <li><a href="#최종-순위-구하기">최종 순위 구하기</a></li>
        <li><a href="#neutral-그룹-분류하기">Neutral 그룹 분류하기</a></li>
      </ul>
    </li>
    <li><a href="#마무리">마무리.</a></li>
  </ul>
</nav>
  </aside>
</div>

  <article>
    <header class="mb-16">
      <h1 class="!my-0 pb-2.5">Style 배분 전략</h1>

          
          <div class="post-categories">
            
              <a href="/categories/investment" class="category-box">Investment</a>
            
          </div>
            
    
      
      <div class="text-sm antialiased opacity-60">
        
        <time>Jul 13, 2024</time>
        
        
        
        
      </div>
      
    </header>
    
    
    <section>
      <h2 id="sp-us-style-indices-methodology">S&amp;P U.S. Style Indices Methodology</h2>
<p>예전에 &lsquo;포트폴리오 구축&rsquo;을 주제로 팀프로젝트를 한 적이 있는데, 그 때
<span style="text-decoration:none; border-bottom:3px solid red; font-weight:bold;">
<a href="https://github.com/Solxcero/ubion-3rd/blob/main/Project1/methodology-sp-us-style.pdf" style="text-decoration:none; color:inherit;"  target="_blank">
S&amp;P U.S. Style Indices Methodology
</a>
</span>
문서를 참고하여 파이썬으로 가치/성장 스타일 투자를 구현한 경험이 있다.<br>
이 방법론의 핵심은</p>
<blockquote>
<p>모든 종목에는 가치주의 성격과 성장주의 성격이 혼합되어 있고, 둘 중 어느 쪽에 더 치우쳐져있는지를 가치점수(Value Score) 와 성장점수(Growth Score)판단하겠다는 아이디어</p>
</blockquote>
<p>라고 보면 된다.</p>
<h2 id="성장이-뭐죠-가치는요">성장이 뭐죠? 가치는요?</h2>
<p><strong>성장주</strong>의 핵심은 미래의 성장 가능성을 높게 평가하고, 주가 상승을 통해 수익을 실현하는 것</p>
<p><strong>가치주</strong>의 핵심은 시장의 일시적인 왜곡이나 기업의 잠재력이 반영되지 않는 저평가된 주식을 찾아내어, 주가가 본래의 가치로 회귀할 때 까지 보유함으로써 수익을 실현하는 것</p>
<p>이렇게 대답하는게 가장 깔끔해 보인다. 😤</p>
<p>네이버증권 주식 정보를 호출하는 pykrx 라이브러리를 활용하여 직접 코스피 종목의 스타일 점수를 측정해보자!</p>
<p>위에서 설명했듯이, 주식의 가치주적 요소와 성장주적인 요소를 점수로 평가 해야하므로 이를 위한 가치 평가 지표, 성장 평가 지표가 있어야 한다.<br>
아래는 문서에서 제시한 지표이다. 해당 지표를 pykrx로 계산해보았다. 계산 시점은 임의로 6월 첫번째 장날로 지정하였다.<br>
모든 지표 계산에 공통적으로 두 가지 전처리 방법이 들어가는데,</p>
<ol>
<li><strong>winsorize</strong> : 데이터의 이상치를 처리하는 방법으로 상한 하한을 각 양끝의 0.05 로 설정하는 방법이다. 즉, 전체 범위의 0.05 ~ 0.95 에만 데이터가 존재하게 하는 방법이다. 이 방법을 쓰면 이상치 데이터를 제거하지 않아도 된다. 실제 금융데이터의 이상치 처리에서 많이 쓰이는 기법이라고 한다.</li>
<li><strong>z정규화</strong> : 각 수치들의 범위가 다 다르기 때문에 객관적인 비교를 위해 정규화를 진행한다.</li>
</ol>
<h3 id="growth-factors">Growth Factors</h3>
<ul>
<li>
<p><span style="text-decoration:none; border-bottom:3px solid red; font-weight:bold;">Three-Year Net Change in Earnings per Share(Excluding Extra Items) over Current Price</span><br>
최근 3년 동안의 주당 순이익(EPS)의 변화를 현재 주가와 비교하는 것이다.<br>
해당 지표 값이 높을수록 회사의 성장 잠재력이 높다고 평가할 수 있다.<br>
피터린치가 만든 PEG의 역수이다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># 3년 EPS 증가율 구하기</span>
</span></span><span style="display:flex;"><span>df_21 <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(stock<span style="color:#f92672">.</span>get_market_fundamental(<span style="color:#e6db74">&#39;2021-06-01&#39;</span>,market<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;KOSPI&#34;</span>)[<span style="color:#e6db74">&#39;EPS&#39;</span>])
</span></span><span style="display:flex;"><span>df_21<span style="color:#f92672">.</span>rename(columns<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#39;EPS&#39;</span>:<span style="color:#e6db74">&#39;EPS_21&#39;</span>},inplace<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>df_24 <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(stock<span style="color:#f92672">.</span>get_market_fundamental(<span style="color:#e6db74">&#39;2024-06-03&#39;</span>,market<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;KOSPI&#34;</span>)[<span style="color:#e6db74">&#39;EPS&#39;</span>])
</span></span><span style="display:flex;"><span>df_24<span style="color:#f92672">.</span>rename(columns<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#39;EPS&#39;</span>:<span style="color:#e6db74">&#39;EPS_24&#39;</span>},inplace<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>eps <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>merge(df_21,df_24,left_index<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>,right_index<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>,how<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;inner&#39;</span>)
</span></span><span style="display:flex;"><span>eps[<span style="color:#e6db74">&#39;NetChange&#39;</span>] <span style="color:#f92672">=</span> eps[<span style="color:#e6db74">&#39;EPS_24&#39;</span>]<span style="color:#f92672">-</span>eps[<span style="color:#e6db74">&#39;EPS_21&#39;</span>]
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 3년 EPS 증가율 대비 주가 (대략 PEG 개념)</span>
</span></span><span style="display:flex;"><span>eps <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>merge(eps,close24,left_index<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>,right_index<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>,how<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;inner&#39;</span>)
</span></span><span style="display:flex;"><span>eps[<span style="color:#e6db74">&#39;approxPEG&#39;</span>] <span style="color:#f92672">=</span> (eps[<span style="color:#e6db74">&#39;NetChange&#39;</span>]<span style="color:#f92672">/</span>eps[<span style="color:#e6db74">&#39;24&#39;</span>])
</span></span><span style="display:flex;"><span>eps[<span style="color:#e6db74">&#39;win_P&#39;</span>] <span style="color:#f92672">=</span> winsorize(eps[<span style="color:#e6db74">&#39;approxPEG&#39;</span>],limits<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0.05</span>,<span style="color:#ae81ff">0.05</span>])
</span></span><span style="display:flex;"><span>eps<span style="color:#f92672">.</span>loc[eps[<span style="color:#e6db74">&#39;NetChange&#39;</span>]<span style="color:#f92672">==</span><span style="color:#ae81ff">0</span>,<span style="color:#e6db74">&#39;win_P&#39;</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span> <span style="color:#75715e"># 정규화하기 전에 필요</span>
</span></span><span style="display:flex;"><span>eps[<span style="color:#e6db74">&#39;stn_P&#39;</span>] <span style="color:#f92672">=</span> ss<span style="color:#f92672">.</span>zscore(eps[<span style="color:#e6db74">&#39;win_P&#39;</span>])
</span></span></code></pre></div></li>
<li>
<p><span style="text-decoration:none; border-bottom:3px solid red; font-weight:bold;">Momentum (12 Months % Price Change)</span><br>
최근 12개월 동안의 주가 변동률을 나타낸다.
투자자들이 주식의 최근 성과를 평가할 때 주로 사용하며 높은 모멘텀은 주가가 상승 추세에 있음을 보여준다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># 상장된 기업의 종가만 사용</span>
</span></span><span style="display:flex;"><span>close24 <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame({<span style="color:#e6db74">&#39;24&#39;</span>:stock<span style="color:#f92672">.</span>get_market_ohlcv(<span style="color:#e6db74">&#39;20240603&#39;</span>,market<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;KOSPI&#34;</span>)[<span style="color:#e6db74">&#39;종가&#39;</span>]})
</span></span><span style="display:flex;"><span>close21 <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame({<span style="color:#e6db74">&#39;23&#39;</span>:stock<span style="color:#f92672">.</span>get_market_ohlcv(<span style="color:#e6db74">&#39;20230601&#39;</span>,market<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;KOSPI&#34;</span>)[<span style="color:#e6db74">&#39;종가&#39;</span>]})
</span></span><span style="display:flex;"><span>ks <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>merge(close21,close24,left_index<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>,right_index<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>,how<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;inner&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 모멘텀 계산  </span>
</span></span><span style="display:flex;"><span>ks[<span style="color:#e6db74">&#39;Momentum&#39;</span>] <span style="color:#f92672">=</span>((ks[<span style="color:#e6db74">&#39;24&#39;</span>]<span style="color:#f92672">-</span>ks[<span style="color:#e6db74">&#39;23&#39;</span>])<span style="color:#f92672">/</span>ks[<span style="color:#e6db74">&#39;23&#39;</span>])<span style="color:#f92672">*</span><span style="color:#ae81ff">100</span>
</span></span><span style="display:flex;"><span>ks<span style="color:#f92672">.</span>rename(columns<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#39;23&#39;</span>:<span style="color:#e6db74">&#39;매수가&#39;</span>,<span style="color:#e6db74">&#39;24&#39;</span>:<span style="color:#e6db74">&#39;매도가&#39;</span>},inplace<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>)
</span></span><span style="display:flex;"><span>ks[<span style="color:#e6db74">&#39;win_MM&#39;</span>] <span style="color:#f92672">=</span> winsorize(ks[<span style="color:#e6db74">&#39;Momentum&#39;</span>],limits<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0.05</span>,<span style="color:#ae81ff">0.05</span>])
</span></span><span style="display:flex;"><span>ks[<span style="color:#e6db74">&#39;stn_MM&#39;</span>] <span style="color:#f92672">=</span> ss<span style="color:#f92672">.</span>zscore(ks[<span style="color:#e6db74">&#39;win_MM&#39;</span>])
</span></span></code></pre></div></li>
<li>
<p><span style="text-decoration:none; border-bottom:3px solid red; font-weight:bold;">Three-Year Sales per Share Growth Rate</span>
최근 3년 동안의 주당 매출 성장률을 의미한다.<br>
회사의 매출이 주당 기준으로 얼마나 증가했는지 판단할 수 있으며, 해당 값이 높을수록 회사가 빠르게 성장하고 있음을 시사한다.</p>
<blockquote>
<p>아쉽게도 pykrx에는 매출액 정보가 없어서 이 기준은 빼고 진행했다. 나중에 OpenDart나 직접 크롤링을 구현하여 추가할 수 있을 것 같다.</p>
</blockquote>
</li>
</ul>
<h4 id="growth-result">Growth Result</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># 성장점수(GS) 만들기</span>
</span></span><span style="display:flex;"><span>growth_S <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>merge(ks[<span style="color:#e6db74">&#39;stn_MM&#39;</span>],eps[<span style="color:#e6db74">&#39;stn_P&#39;</span>],left_index<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>,right_index<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>,how<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;inner&#39;</span>)
</span></span><span style="display:flex;"><span>growth_S[<span style="color:#e6db74">&#39;GS&#39;</span>] <span style="color:#f92672">=</span> (growth_S<span style="color:#f92672">.</span>iloc[:,<span style="color:#ae81ff">0</span>] <span style="color:#f92672">+</span> growth_S<span style="color:#f92672">.</span>iloc[:,<span style="color:#ae81ff">1</span>])<span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>growth_S<span style="color:#f92672">.</span>sort_values(<span style="color:#e6db74">&#39;GS&#39;</span>,ascending<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)
</span></span></code></pre></div><p>모멘텀과 EPS/P을 평균내어 최종 <code>GS(Growth Score)</code> 을 계산한다.</p>
<p align="center">
  <a href="/images/Investment/style_growth.png" data-lightbox="image-set">
    <img src="/images/Investment/style_growth.png" alt="Your Alt Text" >
  </a>
</p> 
<h3 id="value-factors">Value Factors</h3>
<p>먼저 PER과 PBR의 역수를 구하고 시작하겠다. 역수를 구하는 이유는, PER과 PBR의 경우 그 값이 작을수록 저평가되었다고 판단하기 때문에 역수를 취함으로써 점수처럼 값이 커질 수록 저평가되었음을 판단하기 위해서이다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>fm <span style="color:#f92672">=</span> stock<span style="color:#f92672">.</span>get_market_fundamental(<span style="color:#e6db74">&#39;20240603&#39;</span>,market<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;KOSPI&#34;</span>)
</span></span><span style="display:flex;"><span>fm[<span style="color:#e6db74">&#39;E/P&#39;</span>] <span style="color:#f92672">=</span> (<span style="color:#ae81ff">1</span><span style="color:#f92672">/</span>fm[<span style="color:#e6db74">&#39;PER&#39;</span>]) <span style="color:#75715e"># 역수 취하기</span>
</span></span><span style="display:flex;"><span>fm[<span style="color:#e6db74">&#39;B/P&#39;</span>] <span style="color:#f92672">=</span> (<span style="color:#ae81ff">1</span><span style="color:#f92672">/</span>fm[<span style="color:#e6db74">&#39;PBR&#39;</span>])
</span></span><span style="display:flex;"><span>fm <span style="color:#f92672">=</span> fm<span style="color:#f92672">.</span>query(<span style="color:#e6db74">&#39;PER != 0&#39;</span>)<span style="color:#f92672">.</span>sort_values(<span style="color:#e6db74">&#39;PER&#39;</span>) <span style="color:#75715e"># 결측값 제거</span>
</span></span></code></pre></div><ul>
<li><span style="text-decoration:none; border-bottom:3px solid blue; font-weight:bold;">Book Value to Price Ratio</span><br>
회사의 장부 가치(Book Value)를 현재 주가로 나눈 비율이다.
이때 장부 가치는 회사의 순자산(자산-부채)으로 계산되며, 이 비율이 높을수록 주식이 저평가 되어있을 가능성이 높다.<br>
PBR의 역수이다.
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># B/P 구하기</span>
</span></span><span style="display:flex;"><span>bp  <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame({<span style="color:#e6db74">&#39;B/P&#39;</span>:fm[<span style="color:#e6db74">&#39;B/P&#39;</span>]<span style="color:#f92672">.</span>sort_values(ascending<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)})
</span></span><span style="display:flex;"><span>bp[<span style="color:#e6db74">&#39;winB/P&#39;</span>] <span style="color:#f92672">=</span> winsorize(bp[<span style="color:#e6db74">&#39;B/P&#39;</span>],limits<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0.05</span>,<span style="color:#ae81ff">0.05</span>])
</span></span><span style="display:flex;"><span>bp[<span style="color:#e6db74">&#39;stB/P&#39;</span>] <span style="color:#f92672">=</span> ss<span style="color:#f92672">.</span>zscore(bp[<span style="color:#e6db74">&#39;winB/P&#39;</span>])
</span></span></code></pre></div></li>
<li><span style="text-decoration:none; border-bottom:3px solid blue; font-weight:bold;">Earnings To Price Ratio</span><br>
회사의 주당 순이익(EPS)을 현재 주가로 나눈 비율이다.<br>
주가 대비 순이익 비율(P/E 비율의 역수)로 이 비율이 높을수록 주식이 저평가 되었음을 의미한다. <br>
PER의 역수이다.
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># E/P 구하기</span>
</span></span><span style="display:flex;"><span>ep <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame({<span style="color:#e6db74">&#39;E/P&#39;</span>:fm[<span style="color:#e6db74">&#39;E/P&#39;</span>]<span style="color:#f92672">.</span>sort_values(ascending<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)})
</span></span><span style="display:flex;"><span>ep[<span style="color:#e6db74">&#39;winE/P&#39;</span>] <span style="color:#f92672">=</span> winsorize(ep[<span style="color:#e6db74">&#39;E/P&#39;</span>],limits<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0.05</span>,<span style="color:#ae81ff">0.05</span>])  <span style="color:#75715e"># 이상치 조절</span>
</span></span><span style="display:flex;"><span>ep[<span style="color:#e6db74">&#39;stE/P&#39;</span>] <span style="color:#f92672">=</span> ss<span style="color:#f92672">.</span>zscore(ep[<span style="color:#e6db74">&#39;winE/P&#39;</span>]) <span style="color:#75715e"># z-score</span>
</span></span></code></pre></div></li>
<li><span style="text-decoration:none; border-bottom:3px solid blue; font-weight:bold;">Sales to Price Ratio</span><br>
회사의 주당 매출을 현재 주가로 나눈 비율이다.
주가 대비 매출 비율로, 이 비율이 높을수록 주식이 저평가되었을 가능성이 있다.
<blockquote>
<p>이 지표도 마찬가지로 pykrx에 매출 정보가 없기 때문에 이번 작업에서는 제외하겠다.</p>
</blockquote>
</li>
</ul>
<h4 id="value-result">Value Result</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># 가치점수(VS) 만들기</span>
</span></span><span style="display:flex;"><span>value_S <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>merge(ep,bp,left_index<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>,right_index<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>,how<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;inner&#39;</span>)
</span></span><span style="display:flex;"><span>value_S[<span style="color:#e6db74">&#39;VS&#39;</span>] <span style="color:#f92672">=</span> (value_S<span style="color:#f92672">.</span>iloc[:,<span style="color:#ae81ff">2</span>]<span style="color:#f92672">+</span>value_S<span style="color:#f92672">.</span>iloc[:,<span style="color:#ae81ff">5</span>])<span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>value_S<span style="color:#f92672">.</span>sort_values(by<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;VS&#39;</span>,ascending<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)
</span></span></code></pre></div><p>가치점수인 <code>VS(Value Score)</code>도 E/P 와 B/P 의 평균으로 구해준다.</p>
<p align="center">
  <a href="/images/Investment/style_value.png" data-lightbox="image-set">
    <img src="/images/Investment/style_value.png" alt="Your Alt Text" >
  </a>
</p> 
<h3 id="최종-순위-구하기">최종 순위 구하기</h3>
<p>이렇게 코스피 각 종목의 가치점수와 성장점수를 부여해봤다. 이제 그럼 이제 성장과 가치로 분류를 하면 된다.<br>
순서는 다음과 같다.</p>
<ol>
<li>종목별로 <code>GS Rank</code> 와 <code>VS Rank</code> 를 계산한다. 순위매기는 거라고 생각하면 된다.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># 데이터 합치기</span>
</span></span><span style="display:flex;"><span>style <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>merge(value_S[<span style="color:#e6db74">&#39;VS&#39;</span>],growth_S[<span style="color:#e6db74">&#39;GS&#39;</span>],left_index<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>,right_index<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>,how<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;inner&#39;</span>)
</span></span><span style="display:flex;"><span>style<span style="color:#f92672">=</span> style<span style="color:#f92672">.</span>sort_values(<span style="color:#e6db74">&#39;GS&#39;</span>,ascending<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 성장 점수 순위 컬럼 생성</span>
</span></span><span style="display:flex;"><span>style[<span style="color:#e6db74">&#39;GS_Rank&#39;</span>] <span style="color:#f92672">=</span> style[<span style="color:#e6db74">&#39;GS&#39;</span>]<span style="color:#f92672">.</span>rank(method<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;min&#39;</span>,ascending<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 가치 점수 순위 컬럼 생성</span>
</span></span><span style="display:flex;"><span>style[<span style="color:#e6db74">&#39;VS_Rank&#39;</span>] <span style="color:#f92672">=</span> style[<span style="color:#e6db74">&#39;VS&#39;</span>]<span style="color:#f92672">.</span>rank(method<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;min&#39;</span>,ascending<span style="color:#f92672">=</span><span style="color:#66d9ef">False</span>)
</span></span></code></pre></div><ol start="2">
<li><code>GS_Rank / VS_Rank</code> 를 계산하여 정렬한다. 이 값을 기준으로 최종 순위를 매긴다.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># 스타일 순위 매기기 </span>
</span></span><span style="display:flex;"><span>style[<span style="color:#e6db74">&#39;Rank&#39;</span>] <span style="color:#f92672">=</span> style[<span style="color:#e6db74">&#39;GS_Rank&#39;</span>]<span style="color:#f92672">/</span>style[<span style="color:#e6db74">&#39;VS_Rank&#39;</span>]
</span></span></code></pre></div><p align="center">
  <a href="/images/Investment/style_res.png" data-lightbox="image-set">
    <img src="/images/Investment/style_res.png" alt="Your Alt Text" >
  </a>
</p>
<ol start="3">
<li>시가총액을 기준으로 그룹을 Growth, Neutral, Value로 구분한다.</li>
</ol>
<p align="center">
  <a href="/images/Investment/paper1.png" data-lightbox="image-set">
    <img src="/images/Investment/paper1.png" alt="Your Alt Text" >
  </a>
</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># 시가총액 불러오기</span>
</span></span><span style="display:flex;"><span>cap <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(stock<span style="color:#f92672">.</span>get_market_cap(<span style="color:#e6db74">&#39;20240603&#39;</span>,market<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;KOSPI&#34;</span>)[<span style="color:#e6db74">&#39;시가총액&#39;</span>])
</span></span><span style="display:flex;"><span>style_dt<span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>merge(style,cap,left_index<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>,right_index<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>,how<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;inner&#39;</span>)
</span></span><span style="display:flex;"><span>total_cap <span style="color:#f92672">=</span> style_dt<span style="color:#f92672">.</span>시가총액<span style="color:#f92672">.</span>sum()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 전체 시총 대비 개별 종목 시총 비율 구하기</span>
</span></span><span style="display:flex;"><span>style_dt[<span style="color:#e6db74">&#39;cap_ratio&#39;</span>] <span style="color:#f92672">=</span> style_dt<span style="color:#f92672">.</span>iloc[:,<span style="color:#ae81ff">5</span>]<span style="color:#f92672">/</span>total_cap
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 개별 종목 시총 누적비율 컬럼 생성</span>
</span></span><span style="display:flex;"><span>style_dt<span style="color:#f92672">=</span>style_dt<span style="color:#f92672">.</span>sort_values(by<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Rank&#39;</span>)
</span></span><span style="display:flex;"><span>style_dt[<span style="color:#e6db74">&#39;cum_cap&#39;</span>] <span style="color:#f92672">=</span> style_dt[<span style="color:#e6db74">&#39;cap_ratio&#39;</span>]<span style="color:#f92672">.</span>cumsum()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 시총 비율로 3구간 나눠서 성장,중간,가치 그룹화 하기</span>
</span></span><span style="display:flex;"><span>GS <span style="color:#f92672">=</span> style_dt[style_dt[<span style="color:#e6db74">&#39;cum_cap&#39;</span>] <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">0.33</span>]
</span></span><span style="display:flex;"><span>GS[<span style="color:#e6db74">&#39;group&#39;</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;growth&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>NEUTRAL <span style="color:#f92672">=</span> style_dt[(style_dt[<span style="color:#e6db74">&#39;cum_cap&#39;</span>] <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0.33</span>) <span style="color:#f92672">&amp;</span> (style_dt[<span style="color:#e6db74">&#39;cum_cap&#39;</span>] <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">0.67</span>)]
</span></span><span style="display:flex;"><span>NEUTRAL[<span style="color:#e6db74">&#39;group&#39;</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;neutral&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>VS <span style="color:#f92672">=</span> style_dt[style_dt[<span style="color:#e6db74">&#39;cum_cap&#39;</span>]<span style="color:#f92672">&gt;</span><span style="color:#ae81ff">0.67</span>]
</span></span><span style="display:flex;"><span>VS[<span style="color:#e6db74">&#39;group&#39;</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;value&#39;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>style_group <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>concat([GS,NEUTRAL,VS],axis<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)
</span></span></code></pre></div><p>먼저 코스피의 종목 중 style 그룹에 속해있는 종목들만 뽑아서 시가총액 합을 구해준다.<br>
그리고 각 종목의 시가총액 비율을 누적합으로 구한 다음 0~33, 33~67, 68~100 으로 세 구간을 나눠준다.
순서별로 성장그룹, 중립그룹, 가치그룹으로 분류해주면 된다.</p>
<p>결과를 확인해보면</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># 나눈 구간으로 실제 시총 비율 확인하기 </span>
</span></span><span style="display:flex;"><span>growth_cap <span style="color:#f92672">=</span> style_group<span style="color:#f92672">.</span>groupby(<span style="color:#e6db74">&#39;group&#39;</span>)<span style="color:#f92672">.</span>get_group(<span style="color:#e6db74">&#39;growth&#39;</span>)<span style="color:#f92672">.</span>sum()<span style="color:#f92672">.</span>시가총액
</span></span><span style="display:flex;"><span>neutral_cap <span style="color:#f92672">=</span> style_group<span style="color:#f92672">.</span>groupby(<span style="color:#e6db74">&#39;group&#39;</span>)<span style="color:#f92672">.</span>get_group(<span style="color:#e6db74">&#39;neutral&#39;</span>)<span style="color:#f92672">.</span>sum()<span style="color:#f92672">.</span>시가총액
</span></span><span style="display:flex;"><span>value_cap <span style="color:#f92672">=</span> style_group<span style="color:#f92672">.</span>groupby(<span style="color:#e6db74">&#39;group&#39;</span>)<span style="color:#f92672">.</span>get_group(<span style="color:#e6db74">&#39;value&#39;</span>)<span style="color:#f92672">.</span>sum()<span style="color:#f92672">.</span>시가총액
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>print((growth_cap<span style="color:#f92672">/</span>total_cap)<span style="color:#f92672">*</span><span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span>print((neutral_cap<span style="color:#f92672">/</span>total_cap)<span style="color:#f92672">*</span><span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span>print((value_cap<span style="color:#f92672">/</span>total_cap)<span style="color:#f92672">*</span><span style="color:#ae81ff">100</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 스타일별 종목 개수 확인</span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">&#39;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#39;</span>,style_group<span style="color:#f92672">.</span>group<span style="color:#f92672">.</span>value_counts())
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;&#39;&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">31.633205801881942
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">35.36428009359327
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">33.002514104524785
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74"> group
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">value      393
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">growth     153
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">neutral     16
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;&#39;&#39;</span>
</span></span></code></pre></div><p>각 그룹의 비율은 적절하게 삼등분된 걸 알 수 있다. 그룹별 속한 종목의 수를 보면 가치 종목이 절반 이상이고, 중립그룹은 16개로 그 수가 적은 것을 알 수 있다.
22년도에 프로젝트 했을 때도 중립 그룹 수가 가장 적긴 했지만 그때는 76개로 지금보다 더 많았다.
원인을 찾아보니, 중립그룹에 속한 삼성전자가의 시가총액 비율이 무려 27%나 차지했다. 그러다 보니 자연스럽게 중립그룹의 종목 수가 적을 수밖에..</p>
<p align="center">
  <a href="/images/Investment/style_rest.png" data-lightbox="image-set">
    <img src="/images/Investment/style_rest.png" alt="Your Alt Text" >
  </a>
  <em> 산점도로 각 그룹 종목 현황 파악하기 </em>
</p>
<p>더 보기 편하게 plotly로 가져와봤다. (모바일 환경에서는 보기 불편할 수 있음)</p>
<div style="position: relative; width: 100%; height: 700px;">
    <iframe 
        src="/plotly/style_result.html" 
        style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;" 
        frameborder="0" 
        scrolling="yes">
    </iframe>
</div>
<!--src="https://plotly.com/~solxcero/1/embed"-->
<p>위의 scatter 차트의 범례를 하나씩 클릭하면 각 그룹의 종목들만 볼 수 있다. (성장점수, 가치점수) , 종목코드 순으로 popup정보가 뜬다.</p>
<h3 id="neutral-그룹-분류하기">Neutral 그룹 분류하기</h3>
<p>회색으로 표현된 종목들은 Neutral 이라고 해서 가치 요소와 성장 요소가 상대적으로 골고루 갖춰진 종목이라고 보면 된다.<br>
이 중립그룹도 다시 가치그룹과 성장그룹으로 분류할 수가 있다.  중립 종목이 각 그룹에게서 떨어진 거리를 측정하는 아이디어이다.<br>
이 부분의 내용은 문서의 Appendix I (p22)에 설명되어 있다.</p>
<ol>
<li>그룹별 점수 평균 구하기</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span>n <span style="color:#f92672">=</span> NEUTRAL <span style="color:#75715e"># 향후 작업 편의를 위해 중립그룹을 n으로 지정</span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#39;AV_G :</span><span style="color:#e6db74">{</span>VS<span style="color:#f92672">.</span>GS<span style="color:#f92672">.</span>mean()<span style="color:#e6db74">}</span><span style="color:#e6db74">&#39;</span>) <span style="color:#75715e"># 가치그룹의 평균 성장점수</span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#39;AV_V :</span><span style="color:#e6db74">{</span>VS<span style="color:#f92672">.</span>VS<span style="color:#f92672">.</span>mean()<span style="color:#e6db74">}</span><span style="color:#e6db74">&#39;</span>) <span style="color:#75715e"># 가치그룹의 평균 가치점수</span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#39;AG_G :</span><span style="color:#e6db74">{</span>GS<span style="color:#f92672">.</span>GS<span style="color:#f92672">.</span>mean()<span style="color:#e6db74">}</span><span style="color:#e6db74">&#39;</span>) <span style="color:#75715e"># 성장그룹의 평균 성장점수</span>
</span></span><span style="display:flex;"><span>print(<span style="color:#e6db74">f</span><span style="color:#e6db74">&#39;AG_V :</span><span style="color:#e6db74">{</span>GS<span style="color:#f92672">.</span>VS<span style="color:#f92672">.</span>mean()<span style="color:#e6db74">}</span><span style="color:#e6db74">&#39;</span>) <span style="color:#75715e"># 성장그룹의 평균 가치점수</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;&#39;&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">AV_G :-0.09683188730398012
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">AV_V :0.2589608805872862
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">AG_G :0.9230853249666636
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">AG_V :-0.4840451009196985
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">&#39;&#39;&#39;</span>
</span></span></code></pre></div><ol start="2">
<li>Midpoint Distance로 그룹 판단하기
성장 그룹을 먼저 보면</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># 첫번째 조건(IF) : 중립 종목의 성장 점수 &gt;= 성장그룹의 평균 성장점수 </span>
</span></span><span style="display:flex;"><span>g_first <span style="color:#f92672">=</span> n[n[<span style="color:#e6db74">&#39;GS&#39;</span>]<span style="color:#f92672">&gt;=</span>GS<span style="color:#f92672">.</span>GS<span style="color:#f92672">.</span>mean()] 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 해당 종목의 MD : 중립종목의 가치점수 - 성장그룹의 평균 가치점수</span>
</span></span><span style="display:flex;"><span>g_first[<span style="color:#e6db74">&#39;D(G,X)&#39;</span>] <span style="color:#f92672">=</span> abs(g_first<span style="color:#f92672">.</span>iloc[:,<span style="color:#ae81ff">0</span>]<span style="color:#f92672">-</span>GS<span style="color:#f92672">.</span>VS<span style="color:#f92672">.</span>mean())
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 두번째 조건(Else IF) : 중립 종목의 가치 점수 &lt;= -성장그룹의 평균 가치점수</span>
</span></span><span style="display:flex;"><span>g_second <span style="color:#f92672">=</span> n[n[<span style="color:#e6db74">&#39;VS&#39;</span>]<span style="color:#f92672">&lt;=</span> GS<span style="color:#f92672">.</span>VS<span style="color:#f92672">.</span>mean()]
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 해당 종목의 MD : 성장그룹의 평균 성장 점수 - 중립 종목의 성장점수</span>
</span></span><span style="display:flex;"><span>g_second[<span style="color:#e6db74">&#39;D(G,X)&#39;</span>] <span style="color:#f92672">=</span>abs(GS<span style="color:#f92672">.</span>GS<span style="color:#f92672">.</span>mean() <span style="color:#f92672">-</span> g_second<span style="color:#f92672">.</span>iloc[:,<span style="color:#ae81ff">1</span>])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 세번쨰 조건(Else) : 위의 두 가지 조건에 포함되지 않는 종목</span>
</span></span><span style="display:flex;"><span>g_third <span style="color:#f92672">=</span> n<span style="color:#f92672">.</span>drop(index<span style="color:#f92672">=</span>(g_first<span style="color:#f92672">.</span>index<span style="color:#f92672">.</span>tolist() <span style="color:#f92672">+</span> g_second<span style="color:#f92672">.</span>index<span style="color:#f92672">.</span>tolist()))
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 해당 종목의 MD </span>
</span></span><span style="display:flex;"><span>g_third[<span style="color:#e6db74">&#39;D(G,X)&#39;</span>] <span style="color:#f92672">=</span> (((g_third<span style="color:#f92672">.</span>iloc[:,<span style="color:#ae81ff">0</span>])<span style="color:#f92672">-</span>GS<span style="color:#f92672">.</span>VS<span style="color:#f92672">.</span>mean())<span style="color:#f92672">**</span><span style="color:#ae81ff">2</span> <span style="color:#f92672">+</span> (GS<span style="color:#f92672">.</span>GS<span style="color:#f92672">.</span>mean()<span style="color:#f92672">-</span>g_third<span style="color:#f92672">.</span>iloc[:,<span style="color:#ae81ff">1</span>])<span style="color:#f92672">**</span><span style="color:#ae81ff">2</span>)<span style="color:#f92672">**</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># If/Else if/ Else 결과 합치기 </span>
</span></span><span style="display:flex;"><span>ng_total <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>concat([g_first,g_second,g_third],axis<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>ng_total
</span></span></code></pre></div><p>중립종목들의 성장그룹과의 거리를 구한 결과이다.
마지막 컬럼의 <code>D(G,X)</code> 를 보면 되며, 종목 X의 성장그룹G 와의 거리 D 를 뜻한다.</p>
<p align="center">
  <a href="/images/Investment/D(G,X).png" data-lightbox="image-set">
    <img src="/images/Investment/D(G,X).png" alt="Your Alt Text" >
  </a>
</p>
<p>동일한 방법으로 가치그룹과의 거리를 구해보면,</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># IF 에 해당</span>
</span></span><span style="display:flex;"><span>v_first <span style="color:#f92672">=</span> n[n[<span style="color:#e6db74">&#39;VS&#39;</span>] <span style="color:#f92672">&gt;=</span> VS<span style="color:#f92672">.</span>VS<span style="color:#f92672">.</span>mean()]
</span></span><span style="display:flex;"><span>v_first[<span style="color:#e6db74">&#39;D(V,X)&#39;</span>] <span style="color:#f92672">=</span> abs(v_first<span style="color:#f92672">.</span>iloc[:,<span style="color:#ae81ff">1</span>]<span style="color:#f92672">-</span>(VS<span style="color:#f92672">.</span>GS<span style="color:#f92672">.</span>mean()))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Else if 에 해당</span>
</span></span><span style="display:flex;"><span>v_second <span style="color:#f92672">=</span> n[n[<span style="color:#e6db74">&#39;GS&#39;</span>] <span style="color:#f92672">&lt;=</span> VS<span style="color:#f92672">.</span>GS<span style="color:#f92672">.</span>mean()]
</span></span><span style="display:flex;"><span>v_second[<span style="color:#e6db74">&#39;D(V,X)&#39;</span>] <span style="color:#f92672">=</span> abs(VS<span style="color:#f92672">.</span>VS<span style="color:#f92672">.</span>mean() <span style="color:#f92672">-</span> v_second<span style="color:#f92672">.</span>iloc[:,<span style="color:#ae81ff">0</span>])
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Else 에 해당</span>
</span></span><span style="display:flex;"><span>v_thrid <span style="color:#f92672">=</span> n<span style="color:#f92672">.</span>drop(index<span style="color:#f92672">=</span>(v_first<span style="color:#f92672">.</span>index<span style="color:#f92672">.</span>tolist() <span style="color:#f92672">+</span> v_second<span style="color:#f92672">.</span>index<span style="color:#f92672">.</span>tolist()))
</span></span><span style="display:flex;"><span>v_thrid[<span style="color:#e6db74">&#39;D(V,X)&#39;</span>] <span style="color:#f92672">=</span> ((v_thrid<span style="color:#f92672">.</span>VS<span style="color:#f92672">-</span>VS<span style="color:#f92672">.</span>VS<span style="color:#f92672">.</span>mean())<span style="color:#f92672">**</span><span style="color:#ae81ff">2</span> <span style="color:#f92672">+</span> (VS<span style="color:#f92672">.</span>GS<span style="color:#f92672">.</span>mean()<span style="color:#f92672">-</span>v_thrid<span style="color:#f92672">.</span>GS)<span style="color:#f92672">**</span><span style="color:#ae81ff">2</span>)<span style="color:#f92672">**</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># IF/Else if/Else 합치기</span>
</span></span><span style="display:flex;"><span>nv_total <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>concat([v_first,v_second,v_thrid],axis<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>nv_total
</span></span></code></pre></div><p>마지막 컬럼 <code>D(V,X)</code> 로 결과를 확인할 수 있다.</p>
<p align="center">
  <a href="/images/Investment/D(V,X).png" data-lightbox="image-set">
    <img src="/images/Investment/D(V,X).png" alt="Your Alt Text" >
  </a>
</p>
<ol start="3">
<li>가중치 W 구하기
이제 중립 종목의 성장그룹, 가치그룹과의 거리를 구했으니 어느 쪽으로 더 가까운지 가중치를 구해서 판단할 차례이다.
종목 <code>X</code> 에 대하여</li>
</ol>
<ul>
<li>
<p>W(V,X) : Percentage of Float Market Capitalization of Company X in Value Index<br>
= D(G,X)/(D(G,X) + D(V,X))</p>
</li>
<li>
<p>W(G,X) : Percentage of Float Market Capitalization of Company X in Growth Index<br>
= D(V,X)/(D(G,X) + D(V,X))</p>
</li>
<li>
<p>W(V,X) + W(G,X) = 1</p>
</li>
</ul>
<p>로 정의한다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-python" data-lang="python"><span style="display:flex;"><span><span style="color:#75715e"># ng,nv 데이터 합치기 </span>
</span></span><span style="display:flex;"><span>nw <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>merge(ng_total[<span style="color:#e6db74">&#39;D(G,X)&#39;</span>],nv_total[<span style="color:#e6db74">&#39;D(V,X)&#39;</span>], left_index<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>,right_index<span style="color:#f92672">=</span><span style="color:#66d9ef">True</span>, how<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;inner&#39;</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># weight 구하기</span>
</span></span><span style="display:flex;"><span>nw[<span style="color:#e6db74">&#39;W(V,X)&#39;</span>] <span style="color:#f92672">=</span> nw[<span style="color:#e6db74">&#39;D(G,X)&#39;</span>]<span style="color:#f92672">/</span>(nw[<span style="color:#e6db74">&#39;D(G,X)&#39;</span>]<span style="color:#f92672">+</span>nw[<span style="color:#e6db74">&#39;D(V,X)&#39;</span>])
</span></span><span style="display:flex;"><span>nw[<span style="color:#e6db74">&#39;W(G,X)&#39;</span>] <span style="color:#f92672">=</span> nw[<span style="color:#e6db74">&#39;D(V,X)&#39;</span>]<span style="color:#f92672">/</span>(nw[<span style="color:#e6db74">&#39;D(G,X)&#39;</span>]<span style="color:#f92672">+</span>nw[<span style="color:#e6db74">&#39;D(V,X)&#39;</span>])
</span></span></code></pre></div><p>이렇게 구한 다음 W(V,X) &gt; W(G,X) 라면 Value 그룹, W(V,X) &lt; W(G,X) 라면 Growth 그룹으로 분류한다.</p>
<p align="center">
  <a href="/images/Investment/n_result.png" data-lightbox="image-set" >
    <img src="/images/Investment/n_result.png" alt="Your Alt Text" style="width: 500px !important; height: auto !important;">
  </a>
</p>
<p>티커 002350 만 가치그룹으로 분류되고 나머지는 전부 성장그룹으로 분류된 것을 알 수 있다.
삼성전자는 성장주로 분류된 것도 확인할 수 있다.</p>
<h2 id="마무리">마무리.</h2>
<p>주가 정보는 매일 빠르게 변화하며 시장의 움직임을 보여주는 데이터이다. 이번 작업을 통해 금융시장의 움직임을 성장점수, 가치점수, 성장그룹, 가치그룹이라는 지표로 압축해 볼 수 있었다.
결국 지표라는 것은 대표성을 띄는 것이 중요하다고 생각한다. 지표명과 그 지표에 속해있는 요소들의 특성이 일치한다면 잘 만든 지표라고 할 수 있을 거다.<br>
과거 프로젝트를 진행할 당시에도 이 같은 창의적인 접근이 매우 흥미로웠었기에 이번에 날짜와 그래프를 업데이트하여 다시 구현해보았다.</p>
<p>또한 날짜와 마켓명만 입력하면 최종 스캐터가 생성되는 소스코드 링크도 같이 첨부하겠다.</p>
<span style="display: flex; align-items: center; font-size: 14px;">
  <span>소스코드(ipynb) :</span>
  <a href="https://github.com/Solxcero/my-domains/blob/main/Finance/6.StyleInvestment.ipynb" style="margin-left: 5px;">
    <img src="/images/github.png" alt="GitHub" style="width: 20px; height: 20px;">
  </a>
  <span>&nbsp;&nbsp;|&nbsp;소스코드(Scatter) :</span>
  <a href="https://github.com/Solxcero/my-domains/blob/main/Finance/styleInvest.py" style="margin-left: 5px;">
    <img src="/images/github.png" alt="GitHub" style="width: 20px; height: 20px;">
  </a>
  <span>&nbsp;&nbsp;|&nbsp;프로젝트 Repo :</span>
  <a href="https://github.com/Solxcero/ubion-3rd/tree/main/Project1" style="margin-left: 5px;">
    <img src="/images/github.png" alt="GitHub" style="width: 20px; height: 20px;">
  </a>
</span>
    </section> 

    
    

    
    
    
    
    <nav class="mt-24 flex rounded-lg bg-black/[3%] text-lg dark:bg-white/[8%]">
      
      <a
        class="flex w-1/2 items-center rounded-l-md p-6 pr-3 font-semibold no-underline hover:bg-black/[2%] dark:hover:bg-white/[3%]"
        href="/post/devlog/classmethod/"
        ><span class="mr-1.5">←</span><span>드디어 @classmethod를 써본다</span></a
      >
      
      
      <a
        class="ml-auto flex w-1/2 items-center justify-end rounded-r-md p-6 pl-3 font-semibold no-underline hover:bg-black/[2%] dark:hover:bg-white/[3%]"
        href="/post/devlog/ifoverhead/"
        ><span>IF문의 오버헤드</span><span class="ml-1.5">→</span></a
      >
      
    </nav>
    
    

    
    

    
    

    


    
  </article>

    </main>

    <footer
  class="opaco mx-auto flex h-[4.5rem] max-w-3xl items-center px-8 text-[0.9em] opacity-60"
>
<div class="mr-auto">
  &copy; 2025
  <a class="link" href="/">漸入佳境</a>
</div>
<a class="link mx-6" href="https://gohugo.io/" rel="noopener" target="_blank"
>Powered by Hugo️️</a
>️
<a
class="link"
href="https://github.com/nanxiaobei/hugo-paper"
rel="noopener"
target="_blank"
>✎ Paper</a
>
<div id="back-to-top" style="display: none;">
    <a href="#top">
      <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" viewBox="0 0 16 16">
        <path d="M8 10.5a.5.5 0 0 0 .5-.5V4.707l2.646 2.647a.5.5 0 0 0 .708-.708l-3.5-3.5a.5.5 0 0 0-.708 0l-3.5 3.5a.5.5 0 1 0 .708.708L7.5 4.707V10a.5.5 0 0 0 .5.5z"/>
      </svg>
    </a>
  </div>
  

</footer>
<script src="/js/back-to-top.js"></script>

<script src="/js/highlight.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", (event) => {
    document.querySelectorAll("pre code").forEach((block) => {
      hljs.highlightBlock(block);
    });
  });
</script>


    
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css" integrity="sha384-nB0miv6/jRmo5UMMR1wu3Gz6NLsoTkbqJghGIsx//Rlm+ZU03BU6SQNC66uf4l5+" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.js" integrity="sha384-7zkQWkzuo3B5mTepMUcHkMB5jZaolc2xDwL6VFqjFALcbeS9Ggm/Yr2r3Dy4lfFg" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/contrib/auto-render.min.js" integrity="sha384-43gviWU0YVjaDtb/GhzOouOXtZMP/7XUzwPTstBeZFe/+rCMvRwr4yROQP43s0Xk" crossorigin="anonymous"></script>
<script>
    document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
          delimiters: [
              {left: '$$', right: '$$', display: true}, 
              {left: '$', right: '$', display: false},  
              {left: '\\(', right: '\\)', display: false} 
          ],
          throwOnError: false,
          ignoreTags: ["script", "noscript", "style", "textarea", "pre", "code"] 
        });
    });
</script>

    

     
     <script>
        document.addEventListener('DOMContentLoaded', function() {
            
            var tocLinks = document.querySelectorAll('.toc a');
            var sections = [];

            
            var options = {
                root: null, 
                rootMargin: '0px 0px -50% 0px', 
                threshold: 0 
            };

            
            tocLinks.forEach(function(link) {
                var href = link.getAttribute('href');
                if (href && href.startsWith("#")) {
                    var targetSection = document.querySelector(href);
                    if (targetSection) {
                        sections.push({ link: link, section: targetSection });
                    }
                }
            });

            
            var observer = new IntersectionObserver(function(entries) {
                entries.forEach(function(entry) {
                    var targetSection = entry.target;
                    var link = sections.find(function(s) {
                        return s.section === targetSection;
                    }).link;

                    if (entry.isIntersecting) {
                        
                        tocLinks.forEach(function(link) {
                            link.classList.remove('toc-active');
                        });
                        link.classList.add('toc-active');
                    }
                });
            }, options);

            
            sections.forEach(function(section) {
                observer.observe(section.section);
            });

            
            tocLinks.forEach(function(link) {
                link.addEventListener('click', function(event) {
                    
                    tocLinks.forEach(function(link) {
                        link.classList.remove('toc-active');
                    });
                    
                    link.classList.add('toc-active');
                });
            });
        });


  </script>
  

  </body>
</html>
